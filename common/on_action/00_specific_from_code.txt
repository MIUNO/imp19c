on_action_requiring_senate_approval = { #If you change this, also change the scripted effect: change_religion_effect
	effect = {
		if = {
			limit = {
				has_senate_approval < define:NPolitics|SENATE_REQUIRED_APPROVAL_WITHOUT_PENALTIES
				is_republic = yes
				is_ai = no
				NOT = { has_variable = dictatorship_enabled }
				NOT = { has_variable = one_senatorial_bypass }
			}
			add_tyranny = {
				# Calculates the percentage of disapproval
				value = define:NPolitics|SENATE_REQUIRED_APPROVAL_WITHOUT_PENALTIES
				subtract = has_senate_approval
				divide = define:NPolitics|SENATE_REQUIRED_APPROVAL

				# This is the real value that you want for 100% of the effect
				multiply = 20
			}
		}
		if = {
			limit = { has_variable = one_senatorial_bypass }
			custom_tooltip = senatorial_bypass_spent_tt
			remove_variable = one_senatorial_bypass
			set_ignore_senate_approval = no
		}
	}
}

on_ending_war = {
	effect = {
	}
	events = {
	}
}

### VANILLA UNMODIFIED BELOW - PUT MODIFIED ON_ACTIONS ABOVE

on_winning_war = {
	effect = {
	}
	events = {
	}
}

on_losing_war = {
	effect = {
	}
	events = {

	}
	
}

on_ownership_change = { #province scope
	effect = {
	
	}
	events = {
	}
}

on_province_occupied = { #province scope, it will fire AS WELL as on_siege_won
# IMP19c comment: Maybe make this transfer occupation to the war leader to prevent the ally surrender crash?
# A bit of a bodge though...
	effect = {
		if = {
			limit = {
				this = p:3256
				this = c:CAR.capital_scope
				exists = scope:me_syracuse_scope
				controller = scope:me_syracuse_scope
				OR = {
					controller = scope:gm_2_greek_scope
					controller = { is_subject_of = scope:me_syracuse_scope }
				}
			}
			scope:me_syracuse_scope = { set_variable = syr_occupied_carthage_flag }
		}
		if = {
			limit = {
				this = p:428
				exists = scope:gm_2_greek_scope
				OR = {
					controller = scope:gm_2_greek_scope
					controller = { is_subject_of = scope:gm_2_greek_scope }
				}
			}
			scope:gm_2_greek_scope = { set_variable = me_gre_2_14_flag }
		}
		if = {
			limit = { 
				has_owner = yes 
				has_variable = me_epi_2_rome_cap_flag
				exists = scope:me_epirus_scope
				controller = scope:me_epirus_scope
				NOT = {
					scope:me_epirus_scope = { has_variable = me_epi_2_captured_flag }
				}
			}
			scope:me_epirus_scope = { set_variable = me_epi_2_captured_flag }
		}
	}
	events = {
		fire_events.1
		slave_revolts.2 #Interactive Looting
		slave_revolts.5 #Interactive Looting of capital
	}
}

# scope is country being annexed
# scope:actor = country doing the annexing
on_military_annex = {
	effect = {
		every_country_treasure = {
			add_to_list = annexed_treasures
		}
		on_annexation_event_effect = yes
		if = {
			limit = {
				OR = {
					has_variable = me_syr_foreign_country_flag
					has_variable = me_syr_deal_with_devil_flag
				}
			}
			save_scope_as = me_syr_annexed_scope
			if = {
				limit = {
					any_country = { has_variable = death_to_tyrants_flag }
				}
				random_country = {
					limit = { has_variable = death_to_tyrants_flag }
					trigger_event = { id = me_syracuse_1_democracy.60 }
				}
			}
		}
	}
}